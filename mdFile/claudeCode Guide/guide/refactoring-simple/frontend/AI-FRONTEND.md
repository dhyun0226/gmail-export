# 🎨 AI 자율 프론트엔드 리팩토링 가이드

## 🔴 필수 사전 작업
**반드시 다음 파일들을 순서대로 읽고 설정을 메모리에 저장한 후 진행:**
1. `common/refactoring-framework.md` - 프로젝트 독립적 리팩토링 프레임워크
2. `project-config.md` - 현재 프로젝트의 구체적 설정 (프로젝트 루트에 위치)

위 파일들이 없을 경우:
- `frontend/project-config-template.md` 참고하여 생성

## 개요
이 가이드는 React/Vue/Angular 프론트엔드 프로젝트를 도메인 기반으로 리팩토링하는 자동화 가이드입니다.
평면적 구조를 도메인별로 명확히 분리하여 유지보수성을 향상시킵니다.

### 타겟 유형별 적용 범위
- **컴포넌트 지정시**: 해당 컴포넌트와 연관 컴포넌트, 훅, 서비스 분석
- **도메인 지정시**: 도메인 전체 컴포넌트와 로직 리팩토링
- **전체 프로젝트**: 모든 도메인을 순차적으로 리팩토링

## 🚀 실행 방법

### 1. 필요한 정보 제공
- **타겟**: 리팩토링 대상 컴포넌트/도메인명
- **프로젝트 경로**: 프론트엔드 프로젝트 루트
- **결과 저장 경로**: 리팩토링 결과를 저장할 경로

### 2. 자동 실행
이 가이드가 제공되면 AI는 다음을 자동으로 수행합니다:
1. project-config.md 읽기 및 설정 적용 확인
2. refactoring-status.md 파일 생성
3. 단계별 순차 실행 및 진행 상황 업데이트
4. 최종 결과 검증 및 보고서 생성

## 📋 실행 단계

### Stage 1: 프로젝트 구조 분석 (`stage-1/01-structure-analysis.md`)
- **프레임워크 및 버전 확인**: React/Vue/Angular 및 버전 정보
- **디렉토리 구조 파악**: 현재 프로젝트 구조 분석
- **컴포넌트 의존성 분석**: 컴포넌트 간 관계 파악
- **상태 관리 패턴 확인**: Redux/Zustand/Pinia 등 확인

### Stage 2: 리팩토링 계획 수립 (`stage-1/02-refactoring-plan.md`)
- **도메인별 그룹화 계획**: 비즈니스 도메인 식별 및 계획
- **컴포넌트 이동 매핑**: 컴포넌트별 이동 경로
- **import 경로 변경 계획**: 모든 import 문 업데이트 계획

### Stage 3: 컴포넌트 리팩토링 (`stage-1/03-component-refactoring.md`)
- **핵심 원칙**: 기능과 UI 로직 100% 보존
- **프로세스**:
  1. 도메인별 디렉토리 생성 (`domains/{domainName}/`)
  2. 관련 컴포넌트 이동
  3. 스타일 파일 함께 이동
  4. import 경로 업데이트
  5. 인덱스 파일 생성

### Stage 4: 상태 관리 리팩토링 (`stage-1/04-state-refactoring.md`)
- **핵심 원칙**: 상태 관리 로직 도메인별 분리
- **프로세스**:
  1. Redux: 도메인별 slice 분리
  2. Zustand: 도메인별 store 분리
  3. Context API: 도메인별 Provider 분리
  4. 전역 상태 의존성 업데이트

### Stage 5: Hooks/Composables 리팩토링 (`stage-1/05-hooks-refactoring.md`)
- **핵심 원칙**: 비즈니스 로직을 재사용 가능한 형태로 분리
- **프로세스**:
  1. 커스텀 훅/컴포저블 추출
  2. 도메인별 그룹화
  3. 공통 훅 분리
  4. 테스트 작성

### Stage 6: 서비스/API 리팩토링 (`stage-1/06-service-refactoring.md`)
- **핵심 원칙**: API 호출 로직 도메인별 구성
- **프로세스**:
  1. 도메인별 API 서비스 생성
  2. HTTP 클라이언트 설정 분리
  3. 타입 정의 함께 이동
  4. 에러 처리 통합


### Stage 7: 검증 및 완료 (`stage-1/07-verification.md`)
- **검증 항목**:
  1. 모든 컴포넌트 정상 렌더링
  2. 라우팅 정상 작동
  3. 상태 관리 동작 확인
  4. API 통신 정상
  5. 빌드 성공

### Stage 8: 최적화 및 문서화 (`stage-1/08-optimization.md`)
- 번들 크기 분석
- 코드 스플리팅 적용
- Lazy Loading 구현
- 도메인별 README 생성

## 🎯 실행 원칙

### 프로젝트 설정 기반 실행
- **모든 결정의 기준**: project-config.md의 설정이 최우선
- **프레임워크 준수**: 각 프레임워크의 베스트 프랙티스 적용
- **일관성 유지**: 전체 과정에서 동일한 패턴 적용

### 중단 없는 연속 실행
1. **자동 진행**: 각 단계 완료 후 즉시 다음 단계 시작
2. **무중단 실행**: 사용자 승인 없이 자동으로 진행
3. **에러 시에만 중단**: 치명적 오류 발생 시에만 중단 및 보고

### 체크포인트 시스템
- 각 단계별 체크포인트 자동 기록
- CP-S001 (Structure), CP-C001 (Component), CP-ST001 (State)
- 진행 상황 실시간 추적

## 📊 진행 상황 추적

### 실시간 업데이트 파일
- `refactoring-status.md` - 진행 상황 마크다운
- `component-mapping.json` - 컴포넌트 이동 매핑
- `import-updates.json` - import 경로 변경 로그

### refactoring-status.md 템플릿
리팩토링 시작 시 아래 템플릿을 사용하여 refactoring-status.md 파일을 생성합니다:

```markdown
# 프론트엔드 리팩토링 진행 상황

## 프로젝트 정보
- **프레임워크**: [React/Vue3/Angular]
- **상태 관리**: [Redux/Zustand/Pinia/Vuex/NgRx]
- **타겟 도메인**: [리팩토링할 도메인명 또는 전체]
- **분석 시작 시간**: [YYYY-MM-DD HH:MM]
- **현재 단계**: [현재 진행 중인 단계]

## 전체 진행 상황
- **완료 비율**: 0% (0/8 단계 완료)
- **리팩토링된 컴포넌트 수**: 0개
- **이동된 파일 수**: 0개
- **업데이트된 import 문**: 0개
- **식별된 도메인**: []

## 체크포인트 현황 (총 8단계)

### 🟢 도메인 기능 분리 리팩토링
- [ ] 01-structure-analysis (대기) - 프로젝트 구조 분석
- [ ] 02-refactoring-plan (대기) - 리팩토링 계획 수립
- [ ] 03-component-refactoring (대기) - 컴포넌트 계층 리팩토링
- [ ] 04-state-refactoring (대기) - 상태 관리 리팩토링
- [ ] 05-hooks-refactoring (대기) - Hooks/Composables 리팩토링
- [ ] 06-service-refactoring (대기) - 서비스/API 리팩토링
- [ ] 07-verification (대기) - 리팩토링 결과 검증
- [ ] 08-optimization (대기) - 최적화 및 문서화

## 생성된 도메인별 구조

### 도메인 구조 (0개)
** 분석 후 아래 형식으로 생성 예정 **
예시:
- [ ] domains/user/ (대기) - 사용자 관련 기능
- [ ] domains/product/ (대기) - 상품 관련 기능
- [ ] domains/order/ (대기) - 주문 관련 기능

### 공통 모듈 (0개)
** 분석 후 아래 형식으로 생성 예정 **
예시:
- [ ] common/components/ (대기) - 공통 컴포넌트
- [ ] common/hooks/ (대기) - 공통 훅
- [ ] common/utils/ (대기) - 유틸리티 함수

## 주요 이슈 및 결정 사항
이 섹션은 리팩토링 중 발생한 주요 이슈나 결정 사항을 기록합니다.

### 해결된 이슈
- 없음

### 미해결 이슈
- 없음

### 주요 결정 사항
- 없음
```

### 진행률 계산
- 전체 진행률 = (완료 단계 / 전체 8단계) × 100%
- Stage 1: 구조 분석 (12.5%)
- Stage 2: 계획 수립 (12.5%)
- Stage 3: 컴포넌트 (12.5%)
- Stage 4: 상태 관리 (12.5%)
- Stage 5: Hooks (12.5%)
- Stage 6: 서비스 (12.5%)
- Stage 7: 검증 (12.5%)
- Stage 8: 최적화 (12.5%)

## 🔧 사전 준비사항

### 필수 확인사항
1. **🔴 필수 파일 확인**
   - `common/refactoring-framework.md`
   - `project-config.md`
2. 프로젝트 백업 완료
3. 개발 서버 중지
4. Git 커밋 완료

## 🚨 주의사항

### 실행 중 주의사항
- 중간에 사용자에게 질문하지 않음
- 진행 상황은 간단히 보고하고 즉시 계속
- 파일 이동 시 Git 추적 유지

### 기능 보존 원칙
- **100% 기능 유지**: 모든 UI와 비즈니스 로직 보존
- **라우팅 불변**: 모든 경로 유지
- **상태 동작 불변**: 상태 관리 로직 완전 보존

## 🎯 최종 목표

### 리팩토링 목표
- 도메인별 명확한 분리
- 컴포넌트 재사용성 향상
- 유지보수성 개선
- 번들 크기 최적화

### 최종 산출물
1. 도메인별로 구성된 소스코드
   ```
   domains/
   ├── user/
   │   ├── components/
   │   ├── hooks/
   │   ├── services/
   │   └── types/
   ├── product/
   └── order/
   ```
2. 컴포넌트 매핑 문서
3. 리팩토링 전후 비교 레포트
4. 성능 개선 보고서

---

**시작하려면 이 가이드와 함께 타겟 도메인/컴포넌트명을 제공해주세요.**

⚠️ **실행 순서**:
1. 필수 파일 읽기
   - common/refactoring-framework.md
   - project-config.md
2. 이 가이드에 따라 자동 실행
3. 각 단계에서 설정을 지속적으로 적용